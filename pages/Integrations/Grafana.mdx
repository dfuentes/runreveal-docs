# Grafana

RunReveal supports a grafana plugin in both Grafana Cloud, and self-hosted grafana deployments. The code supporting our grafana plugin is hosted here:

* [https://github.com/runreveal/runreveal-datasource](https://github.com/runreveal/runreveal-datasource)

The grafana plugin allows anyone to create powerful dashboards in seconds and centrally host them with operational and other dashboards.

<img src="/grafana-1.png"/>

## 1. Installing the plugin

Go to [the RunReveal Grafana Plugin](https://grafana.com/grafana/plugins/runreveal-runreveal-datasource/) and install it to your grafana instance by clicking "Install plugin" under the Installation tab.&#x20;

<img src="/grafana-2.png"/>

## 2. Add RunReveal Datasource

We still need to configure the RunReveal to authenticate with our API. Under `Home > Connections > Data sources`, search for RunReveal.

<img src="/grafana-3.png"/>

Next you'll need an API token. There's two different ways to get an API token.

* **Generate via the CLI**I. Run the below command, paste the token into the Session Token section of the grafana dashboard, and click "Save & test".

<img src="/grafana-4.png"/>

* **Generate in the RunReveal UI**I. f you haven't set up your CLI interface, you can generate this same token in the UI under the "Settings" panel. Click "Generate Token" next to the API Tokens heading and copy/paste into the Session Token field in grafana.

<img src="/grafana-5.png"/>

## 3. Live threat monitoring dashboards

From the data sources screen, select the "Dashboards" tab. On the Dashboards tab, click "Import"

<img src="/grafana-6.png"/>

You'll then see "RunReveal Default Dashboard" within your dashboards

<img src="/grafana-7.png"/>

This dashboard is maintained by us to help you quickly get up and running. If you'd like to see a revision history or see the detailed JSON specification of the dashboard that was just installed, [this link has more information](https://grafana.com/grafana/dashboards/19069-runreveal-default-dashboard/?tab=revisions).

## 4. Custom dashboards

Within a grafana dashboard you can make a new panel and select the `runreveal_source` datasource. Once you do that, you can make dashboards and panels using the same interface that the `runreveal logs` search interface works with.

<img src="/grafana-8.png"/>

Remember, Grafana works really well with timeseries data, and the RunReveal search interface supports the macros `$__fromTime` `$__toTime` and `$__timeInterval`&#x20;

|                               |                                                                                            |
| ----------------------------- | ------------------------------------------------------------------------------------------ |
| $\_\_fromTime                 | Replaced by the starting time of the range of the panel casted to DateTime                 |
| $\_\_toTime                   | Replaced by the ending time of the range of the panel casted to DateTime                   |
| $\_\_timeInterval(columnName) | Replaced by a function calculating the interval based on window size, useful when grouping |

## Self hosting

The RunReveal plugin can be installed on self-hosted grafana as well. Clone the repo and follow the directions here to set up the RunReveal grafana plugin on self-hosted grafana.

* [https://grafana.com/docs/grafana/latest/administration/plugin-management/#install-plugin-on-local-grafana](https://grafana.com/docs/grafana/latest/administration/plugin-management/#install-plugin-on-local-grafana)
